services:
  livekit:
    image: livekit/livekit-server:latest
    command: ["--config", "/etc/livekit.yaml"]
    ports:
      - "7880:7880"
      - "7881:7881/tcp"
      - "7881:7881/udp"
      - "50000-50100:50000-50100/udp"
    volumes:
      - ./livekit/livekit.yaml:/etc/livekit.yaml:ro
  egress:
    image: livekit/egress:latest
    environment:
      - LIVEKIT_URL=ws://livekit:7880
      - LIVEKIT_API_KEY=devkey
      - LIVEKIT_API_SECRET=devsecret
      - LIVEKIT_EGRESS_OUTPUT_DIR=/recordings
    volumes:
      - ./recordings:/recordings
    depends_on:
      - livekit
