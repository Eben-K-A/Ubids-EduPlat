apiVersion: v1
kind: ConfigMap
metadata:
  name: eduplat-alert-rules
  namespace: eduplat
data:
  alerts.yml: |
    groups:
      - name: eduplat-backend
        rules:
          - alert: HighErrorRate
            expr: rate(http_server_requests_seconds_count{status=~"5.."}[5m]) > 1
            for: 5m
            labels:
              severity: warning
            annotations:
              summary: High 5xx error rate
          - alert: HighLatency
            expr: histogram_quantile(0.95, sum(rate(http_server_requests_seconds_bucket[5m])) by (le)) > 1
            for: 5m
            labels:
              severity: warning
            annotations:
              summary: High p95 latency
